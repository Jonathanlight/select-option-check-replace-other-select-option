<!DOCTYPE html>
<html>
<body>

<p>Type de Profil:</p>
<select id="entity-type" >
  <option value="ROLE_ADMIN">Administrateur</option>
  <option value="ROLE_DIAG_OP">Diagnostiqueur opérateur</option>
  <option value="ROLE_BAIL_OP">Bailleur opérateur</option>
  <option value="ROLE_DIAG_ADMIN">Diagnostiqueur administrateur</option>
  <option value="ROLE_BAIL_ADMIN">Bailleur administrateur</option>
</select>
<br><br>
<p>Sélectionner une société:</p>
<select id="company">
  <option seleted>Sélectionner une société</option>
</select>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>

$("#entity-type").change(function(){
    $('#company').empty();
    var role = $(this).val();
    console.log(role)

    var newArr = [];
    var arr = [
    	[2, "Bailleur 1"],
        [6, "Diagnostiqueur 3"],
        [9, "Bailleur 12"],
        [12, "Bailleur 9"],
        [17, "Diagnostiqueur 5"],
        [22, "Diagnostiqueur 13"],
        [25, "Diagnostiqueur 22"]
    ];

    const DIAGNOSTIQUEUR = "Diagnostiqueur";
    const BAILLEUR = "Bailleur";

    $.each(arr, function (index, value) {

    	var indice = DIAGNOSTIQUEUR;

        if(role == "ROLE_DIAG_OP" || role == "ROLE_DIAG_ADMIN") {
        	var size = indice.length;
        	var n = value[1].indexOf(indice);

            console.log(n)
        	if(n == 0) {
              var res = value[1].substring(n,size+1);
              newArr.push([value[0], value[1]])
            }
        }else if(role == "ROLE_BAIL_OP" || role == "ROLE_BAIL_ADMIN") {
        	var size = indice.length;
        	var n = value[1].indexOf(indice);

            console.log(n)
        	if(n == -1) {
              var res = value[1].substring(n,size+1);
              newArr.push([value[0], value[1]])
            }
        }

    });

    console.log(newArr)
    $.each(newArr, function(key, value) {
    $('#company').append($("<option/>", {
        value: value[0], text: value[1]
    }));
});

});

</script>

</body>
</html>
